"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getHeight = void 0;
const terra_js_1 = require("@terra-money/terra.js");
const deposit_1 = require("./deposit");
// Cache clients
const clients = {};
const getHeight = async (network) => {
    // connect to testnet
    let prefix;
    switch (network) {
        case deposit_1.TerraNetwork.Columbus:
            prefix = "lcd";
            break;
        case deposit_1.TerraNetwork.Tequila:
            prefix = "tequila-lcd";
            break;
        default:
            throw new Error(`Terra network ${String(network)} not supported.`);
    }
    const terra = clients[network] ||
        new terra_js_1.LCDClient({
            URL: `https://${String(prefix)}.terra.dev`,
            chainID: network,
        });
    clients[network] = terra;
    const result = await terra.tendermint.blockInfo();
    return parseInt(result.block.header.height, 10);
};
exports.getHeight = getHeight;
//# sourceMappingURL=height.js.map